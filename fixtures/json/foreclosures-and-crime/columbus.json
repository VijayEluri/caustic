
{
    "description" : "Search for crime for the whole of Columbus for a single day.  Format of {{date}} is 'MM/DD/YYYY', and the available dates are '09/21/2003' through yesterday.",
    "load" : "http://www.columbuspolice.org/Reports/PubDefault.aspx",
    "then" :
    [
	"../shared/viewstate.json",
	{
	    "load" : "http://www.columbuspolice.org/Reports/PubDefault.aspx",
	    "method" : "post",
	    "posts" : {
		"__VIEWSTATE" : "{{viewstate}}",
		"btnAgree" : "I Understand"
	    },
	    "then" : [
		"../shared/viewstate.json",
		{
		    "load" : "http://www.columbuspolice.org/Reports/Search.aspx",
		    "method" : "post",
		    "posts" : {
			"__EVENTTARGET" : "btnBrowse",
			"__EVENTARGUMENT" : "",
			"__VIEWSTATE" : "{{viewstate}}",
			"searchBy" : "rdoNumber",
			"txtNumber" : "",
			"txtLastName": ""
		    },
		    "then" : [
			"../shared/viewstate.json",
			{
			    "load" : "http://www.columbuspolice.org/Reports/StepOne.aspx",
			    "method" : "post",
			    "posts" : {
				"__EVENTTARGET" : "lnkCity",
				"__EVENTARGUMENT" : "",
				"__VIEWSTATE" : "{{viewstate}}"
			    },
			    "then" : [
				"../shared/viewstate.json",
				{
				    "load" : "http://www.columbuspolice.org/Reports/StepTwo.aspx?loc=all",
				    "method" : "post",
				    "posts" : {
					"txtDate" : "{{date}}",
					"btnGo"   : "Go",
					"__VIEWSTATE" : "{{viewstate}}",
					"__EVENTTARGET" : "",
					"__EVENTARGUMENT" : ""
				    },
				    "then" : [
					"../shared/viewstate.json",
					{
					    "load" : "http://www.columbuspolice.org/Reports/StepThree.aspx?loc=all",
					    "method" : "post",
					    "posts" : {
						"btnGo"   : "Go",
						"__VIEWSTATE" : "{{viewstate}}",
						"__EVENTTARGET" : "",
						"__EVENTARGUMENT" : "",
						"chkPerson" : "on",
						"chkProp" : "on",
						"chkOther" : "on"
					    },
					    "then" : [
						"columbus-table.json",
						"../shared/viewstate.json",
						{
						    "find" : "href\\s*=\\s*\"javascript:__doPostBack\\('(grdCases\\$_ctl\\d+\\$_ctl\\d+)'",
						    "replace" : "$1",
						    "name" : "grdCases",
						    "then" : {
							"load" : "http://www.columbuspolice.org/Reports/ReportGrid.aspx?loc=all",
							"method" : "post",
							"posts" : {
							    "__VIEWSTATE" : "{{viewstate}}",
							    "__EVENTTARGET" : "{{grdCases}}",
							    "__EVENTARGUMENT" : ""
							},
							"then" : "columbus-table.json"
						    }
						}]
					}]
				}]
			}]
		}]
	}]
}
